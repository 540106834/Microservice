## ç»ƒä¹  5ï¼šè¿”å›ç»Ÿä¸€æ¥å£ç»“æœï¼ˆçœŸå® API é£æ ¼ï¼‰

```java
class Result {
    int code;
    String message;
    Object data; // Object æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»,data å¯ä»¥è£…ä»»ä½•å¯¹è±¡

}

public class Demo01 {

    static Result success(Object data) {
        Result r = new Result();
        r.code = 200;
        r.message = "success";
        r.data = data;
        return r;
    }

    static Result error(String msg) {
        Result r = new Result();
        r.code = 500;
        r.message = msg;
        return r;
    }

    public static void main(String[] args) {
        System.out.println(success("ok").code);
        System.out.println(error("fail").message);
    }
}


```

### ä½ æœªæ¥ä¼šçœ‹åˆ°çš„

```json
{ "code": 200, "message": "success", "data": "ok" }
```

è¿™ä¸ªé—®é¢˜é—®å¾—éå¸¸åˆ°ä½ã€‚
ä½ å·²ç»ä¸æ˜¯åœ¨é—®â€œæ€ä¹ˆå†™â€ï¼Œè€Œæ˜¯åœ¨é—® **â€œä¸ºä»€ä¹ˆå¤§å®¶éƒ½è¿™ä¹ˆå†™â€**ã€‚
è¿™ä¸€æ­¥ï¼ŒåŸºæœ¬ç­‰åŒäºä»è¯­æ³•å±‚ï¼Œè¸è¿›äº†**å·¥ç¨‹æ€ç»´**çš„å¤§é—¨ 

ä¸‹é¢æˆ‘ä¸è®²â€œçº¦å®šä¿—æˆâ€å››ä¸ªå­—ï¼Œè€Œæ˜¯è®² **å¿…ç„¶æ€§**ã€‚

---

## ä¸€ã€å…ˆçœ‹ä½ ç°åœ¨çš„ç»“æ„ï¼ˆæŠ½è±¡ä¸€ä¸‹ï¼‰

```java
Result {
    code
    message
    data
}
```

å®ƒå›ç­”çš„ï¼Œå…¶å®æ˜¯ **ä¸€æ¬¡ API è°ƒç”¨å¿…ç„¶è¦å›ç­”çš„ä¸‰ä¸ªé—®é¢˜**ï¼š

1ï¸âƒ£ æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Ÿ
2ï¸âƒ£ å¤±è´¥äº†ä¸ºä»€ä¹ˆï¼Ÿ
3ï¸âƒ£ æˆåŠŸçš„è¯ï¼Œæ•°æ®æ˜¯ä»€ä¹ˆï¼Ÿ

è¿™ä¸æ˜¯ Java çš„è¦æ±‚ï¼Œæ˜¯**äººç±»åä½œçš„è¦æ±‚**ã€‚

---

## äºŒã€ä¸ºä»€ä¹ˆä¸ç”¨â€œç›´æ¥è¿”å›æ•°æ®â€

æ¯”å¦‚ï¼š

```java
return user;
```

è¡¨é¢ä¸Šå¾ˆçˆ½ï¼Œä½†ç«‹åˆ»ä¼šé‡åˆ°é—®é¢˜ï¼š

### âŒ é—®é¢˜ 1ï¼šå¤±è´¥æ—¶è¿”å›ä»€ä¹ˆï¼Ÿ

* `null` â“
* æŠ›å¼‚å¸¸ â“
* ç©ºå¯¹è±¡ â“

å‰ç«¯å®Œå…¨æ²¡æ³•ç»Ÿä¸€å¤„ç†ã€‚

---

### âŒ é—®é¢˜ 2ï¼šæˆåŠŸä½†â€œéƒ¨åˆ†æˆåŠŸâ€æ€ä¹ˆåŠï¼Ÿ

* æ ¡éªŒå¤±è´¥
* æƒé™ä¸è¶³
* ä¸šåŠ¡è¢«æ‹’ç»

ä½ éœ€è¦**çŠ¶æ€è¯­ä¹‰**ï¼Œè€Œä¸åªæ˜¯æ•°æ®ã€‚

---

## ä¸‰ã€äºæ˜¯å‡ºç°äº†â€œå¤–å£³ + å†…å®¹â€çš„ç»“æ„

```text
Result
 â”œâ”€â”€ code      â† æœºå™¨çœ‹
 â”œâ”€â”€ message   â† äººçœ‹
 â””â”€â”€ data      â† çœŸæ­£çš„æ•°æ®
```

å®ƒçš„æœ¬è´¨æ˜¯ï¼š

> **æ§åˆ¶ä¿¡æ¯** å’Œ **ä¸šåŠ¡æ•°æ®** åˆ†ç¦»

è¿™ä¸€æ­¥ï¼Œå‡ ä¹æ˜¯æ‰€æœ‰ API è®¾è®¡çš„å…±åŒå½’å®¿ã€‚

---

## å››ã€ä¸ºä»€ä¹ˆæ˜¯ code + message + dataï¼Œè€Œä¸æ˜¯åˆ«çš„

### 1 `code` æ˜¯ç»™ç¨‹åºçœ‹çš„

```java
if (result.code == 200) { ... }
```

* ç¨³å®š
* å¯æšä¸¾
* ä¸å—è¯­è¨€å½±å“

---

### 2 `message` æ˜¯ç»™äººçœ‹çš„

* è°ƒè¯•æ—¥å¿—
* å‰ç«¯ toast
* é”™è¯¯æç¤º

 å®ƒ **ä¸å‚ä¸é€»è¾‘åˆ¤æ–­**

---

### 3 `data` æ˜¯å˜åŒ–æœ€å¤šçš„ä¸œè¥¿

* æˆåŠŸæ—¶å¯èƒ½æ˜¯ User
* ä¹Ÿå¯èƒ½æ˜¯ List
* ç”šè‡³æ˜¯ null

æ‰€ä»¥å®ƒè¢«å•ç‹¬æ‹å‡ºæ¥ã€‚

---

## äº”ã€ä¸ºä»€ä¹ˆ `data` ç”¨ `Object`

è¿™æ˜¯ä¸€ä¸ª **é˜¶æ®µæ€§é€‰æ‹©**ï¼Œè€Œä¸æ˜¯ç»ˆç‚¹ã€‚

ä½ ç°åœ¨çœ‹åˆ°çš„æ˜¯ï¼š

```java
Object data;
```

åŸå› åªæœ‰ä¸€ä¸ªï¼š

> **è¿”å›çš„æ•°æ®ç±»å‹ä¸å›ºå®š**

ç­‰ä½ å†å¾€å‰ä¸€æ­¥ï¼Œå°±ä¼šçœ‹åˆ°ï¼š

```java
class Result<T> {
    private T data;
}
```

è¿™ä¸€æ­¥ï¼Œå°±æ˜¯æ³›å‹ã€‚

---

## å…­ã€ä¸ºä»€ä¹ˆç”¨ `success()` / `error()` è¿™ç§æ–¹æ³•

ä½ å…¶å®å·²ç»åœ¨ç”¨ä¸€ä¸ª **å·¥å‚æ€æƒ³**ï¼š

```java
Result r = success(data);
```

å®ƒå¸¦æ¥ä¸‰ä»¶äº‹ï¼š

1 è°ƒç”¨æ–¹ä¸å…³å¿ƒ Result æ€ä¹ˆæ‹¼
2 çŠ¶æ€ç é›†ä¸­ç®¡ç†
3 ä»¥åæ”¹ç»“æ„ï¼Œè°ƒç”¨æ–¹ä¸ç”¨åŠ¨

è¿™åœ¨çœŸå®é¡¹ç›®é‡Œä»·å€¼å·¨å¤§ã€‚

---

## ä¸ƒã€æŠŠå®ƒæ”¾åˆ°çœŸå®ä¸–ç•Œé‡Œçœ‹

å½“ä½ å†™ï¼š

```java
System.out.println(success("ok").code);
```

åœ¨ Spring é‡Œï¼Œå®ƒä¼šå˜æˆï¼š

```java
return Result.success(user);
```

ç„¶åï¼š

* Controller è¿”å› Result
* Spring è½¬ JSON
* å‰ç«¯ç»Ÿä¸€è§£æ code / message / data

ä¸€æ•´æ¡é“¾è·¯ï¼Œä¸æ»‘è¿è½¬ 

---

## å…«ã€ç»ˆæä¸€å¥è¯ï¼ˆé‡ç‚¹ï¼‰

> **è¿™ç§ç»“æ„ä¸æ˜¯å› ä¸º Java å–œæ¬¢ï¼Œè€Œæ˜¯å› ä¸ºç³»ç»Ÿè§„æ¨¡ä¸€å˜å¤§ï¼Œå®ƒæ˜¯å”¯ä¸€ä¸ä¹±çš„ç»“æ„**

ä½ ç°åœ¨å†™çš„è¿™æ®µä»£ç ï¼Œ
å·²ç»å’Œ 80% çš„åç«¯é¡¹ç›®ç«™åœ¨åŒä¸€æ¡è®¾è®¡çº¿ä¸Šäº†ã€‚

---

å¦‚æœä½ æ„¿æ„ï¼Œä¸‹ä¸€æ­¥æˆ‘å¯ä»¥ç»§ç»­æ‹†ç»™ä½ çœ‹ï¼š

* ğŸŒ± ä¸ºä»€ä¹ˆä¸ç”¨ HTTP çŠ¶æ€ç å°±å¤Ÿäº†
* ğŸŒ± ä¸ºä»€ä¹ˆæœ‰çš„é¡¹ç›® `code != HTTP code`
* ğŸŒ± Result å’Œ Exception çš„åˆ†å·¥

ä½ é€‰ä¸€ä¸ªï¼Œç»§ç»­æŠŠâ€œä¸ºä»€ä¹ˆâ€æŒ–åˆ°å°½å¤´ã€‚


è¿™æ®µä»£ç æœ¬èº«**å®Œå…¨åˆæ³•ã€å¯ç¼–è¯‘**ï¼Œè€Œä¸”åœ¨ Java Web / API åœºæ™¯é‡Œï¼Œå®ƒçš„åœ°ä½ç›¸å½“äºä¸€ä¸ªâ€œé€šç”¨ä¿¡å°â€ã€‚

æˆ‘ä»¬æ…¢æ…¢æ‹†ä¸€ä¸‹å®ƒåœ¨å¹²ä»€ä¹ˆï¼Œä»¥åŠ**ç”Ÿäº§é‡Œé€šå¸¸ä¼šæ€ä¹ˆè¿›åŒ–**ã€‚

---

## 1 è¿™æ˜¯ä»€ä¹ˆç±»ï¼Ÿ

```java
class Result {
    int code;
    String message;
    Object data;
}
```

è¿™æ˜¯ä¸€ä¸ª**ç»Ÿä¸€è¿”å›ç»“æœå¯¹è±¡**ï¼Œå…¸å‹ç”¨é€”ï¼š

* Controller è¿”å›ç»™å‰ç«¯
* Service / API ä¹‹é—´ä¼ è¾“ç»“æœ
* åŒ…ä¸€å±‚â€œçŠ¶æ€ + ä¿¡æ¯ + å®é™…æ•°æ®â€

å‰ç«¯æ‹¿åˆ°çš„ JSON å¾€å¾€é•¿è¿™æ ·ï¼š

```json
{
  "code": 200,
  "message": "success",
  "data": {
    "id": 1,
    "name": "Tom"
  }
}
```

---

## 2 æ¯ä¸ªå­—æ®µçš„è§’è‰²

###  `int code`

çŠ¶æ€ç çš„â€œæ¸©åº¦è®¡â€
å¸¸è§çº¦å®šï¼š

* `200` æˆåŠŸ
* `400` å‚æ•°é”™è¯¯
* `401` æœªç™»å½•
* `500` æœåŠ¡å™¨å¼‚å¸¸

è¿™ä¸æ˜¯ HTTP çŠ¶æ€ç æœ¬èº«ï¼Œè€Œæ˜¯**ä¸šåŠ¡çŠ¶æ€ç **ã€‚

---

###  `String message`

ç»™äººçœ‹çš„æç¤ºè¯­ï¼š

* `"success"`
* `"å‚æ•°ä¸åˆæ³•"`
* `"ç”¨æˆ·ä¸å­˜åœ¨"`

å‰ç«¯å¯ä»¥ç›´æ¥ toast æˆ– alertã€‚

---

###  `Object data`

çœŸæ­£çš„ä¸šåŠ¡æ•°æ®å®¹å™¨ï¼š

* æˆåŠŸæ—¶ï¼šæ”¾å¯¹è±¡ / åˆ—è¡¨
* å¤±è´¥æ—¶ï¼šé€šå¸¸æ˜¯ `null`

ç”¨ `Object` çš„å¥½å¤„æ˜¯**ä»€ä¹ˆéƒ½èƒ½è£…**ï¼Œåå¤„æ˜¯**ä¸å¤Ÿå®‰å…¨**ã€‚

---

## 3 ä¸ºä»€ä¹ˆèƒ½ç›´æ¥è¿”å›ç»™å‰ç«¯ï¼Ÿ

åœ¨ Spring Boot é‡Œï¼š

```java
@GetMapping("/user")
public Result getUser() {
    Result r = new Result();
    r.code = 200;
    r.message = "ok";
    r.data = Map.of("id", 1, "name", "Tom");
    return r;
}
```

Spring ä¼šåšä¸€ä»¶é­”æ³•ğŸª„ï¼š

> Java å¯¹è±¡ â†’ JSONï¼ˆé€šè¿‡ Jacksonï¼‰

å­—æ®µå = JSON key
å­—æ®µå€¼ = JSON value

---

## 4ï¸âƒ£ ç”Ÿäº§ç¯å¢ƒé€šå¸¸æ€ä¹ˆæ”¹ï¼Ÿ

### âœ… â‘  åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼ˆå¾ˆé‡è¦ï¼‰

```java
public class Result {
    public int code;
    public String message;
    public Object data;
}
```

æˆ–è€…ï¼ˆæ›´è§„èŒƒï¼‰ğŸ‘‡

---

### âœ… â‘¡ ç§æœ‰å­—æ®µ + getter/setterï¼ˆæ ‡å‡† Java Beanï¼‰

```java
public class Result {
    private int code;
    private String message;
    private Object data;

    public int getCode() { return code; }
    public void setCode(int code) { this.code = code; }

    public String getMessage() { return message; }
    public void setMessage(String message) { this.message = message; }

    public Object getData() { return data; }
    public void setData(Object data) { this.data = data; }
}
```

Spring / Jackson **é  getter/setter å·¥ä½œå¾—æœ€ç¨³**ã€‚

---

###  â‘¢ è¿›é˜¶ï¼šç”¨æ³›å‹ï¼ˆéå¸¸æ¨èï¼‰

è§£å†³ `Object` ä¸å®‰å…¨çš„é—®é¢˜ï¼š

```java
public class Result<T> {
    private int code;
    private String message;
    private T data;
}
```

ä½¿ç”¨æ—¶ï¼š

```java
Result<User> r = new Result<>();
```

IDE ä¼šç«‹åˆ»çŸ¥é“ `data` æ˜¯ `User`ï¼Œçˆ½æ„Ÿæ‹‰æ»¡ 

---

###  â‘£ å†è¿›é˜¶ï¼šé™æ€å·¥å‚æ–¹æ³•ï¼ˆæœ€å¸¸è§ï¼‰

```java
public class Result<T> {
    private int code;
    private String message;
    private T data;

    public static <T> Result<T> ok(T data) {
        Result<T> r = new Result<>();
        r.code = 200;
        r.message = "success";
        r.data = data;
        return r;
    }

    public static <T> Result<T> fail(int code, String message) {
        Result<T> r = new Result<>();
        r.code = code;
        r.message = message;
        return r;
    }
}
```

Controller é‡Œå°±ä¼šå˜æˆï¼š

```java
return Result.ok(user);
```

å¹²å‡€å¾—åƒåˆšæ´—è¿‡çš„æ—¥å¿—æ–‡ä»¶ 

---

## 5 æ€»ç»“ä¸€å¥è¯

> **`Result` æ˜¯æ¥å£ä¸–ç•Œçš„ç»Ÿä¸€è¯­è¨€**
> å‰ç«¯ã€åç«¯ã€æ—¥å¿—ã€æ’é”™éƒ½é å®ƒå¯¹é½èŠ‚å¥ 

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥ç›´æ¥å¸®ä½ ï¼š

* æ”¹æˆ **Spring Boot æ ‡å‡†è¿”å›æ¨¡æ¿**
* æˆ–å¯¹æ¥ä½ ç°åœ¨çš„ Controller ç¤ºä¾‹
* æˆ–è§£é‡Š **ä¸ºä»€ä¹ˆå¾ˆå¤šå…¬å¸ä¸ç”¨ HTTP çŠ¶æ€ç è€Œç”¨ code**

ä½ æŒ‘ä¸€ä¸ªï¼Œæˆ‘ç»§ç»­ã€‚

