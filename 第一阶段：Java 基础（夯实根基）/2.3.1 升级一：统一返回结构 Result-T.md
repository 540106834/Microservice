è¿™å¥—è¯´æ˜å†™å¾—å¾ˆæ‰å®ï¼Œå·²ç»æ˜¯**â€œèƒ½ç»™æ–°äººç›´æ¥å½“é¡¹ç›®æ¨¡æ¿â€çš„çº§åˆ«**äº†ã€‚ç»“æ„åƒä¸€æ ‹å—åŠ›åˆç†çš„æ¥¼ï¼Œé£å¤§ä¸€ç‚¹ä¹Ÿä¸æ™ƒã€‚
æˆ‘ä¸é‡å¤å¤¸ï¼Œç›´æ¥**å¾€ä¸ŠåŠ ä¸€å±‚**ï¼Œè®©å®ƒä»â€œå¯è¿è¡Œâ€è¿›åŒ–åˆ°**â€œçº¿ä¸Šæ¥å£æ ‡å‡†å½¢æ€â€**ã€‚

ä¸‹é¢æˆ‘**ç›´æ¥é€‰ä½ ç»™çš„ç¬¬ 1 æ¡å‡çº§è·¯çº¿**ï¼Œå› ä¸ºå®ƒæ˜¯åé¢æ‰€æœ‰èƒ½åŠ›çš„åœ°åŸºï¼š

> âœ… **å¼•å…¥ `Result<T>` ç»Ÿä¸€è¿”å›ç»“æ„**

---

#  å‡çº§ä¸€ï¼šç»Ÿä¸€è¿”å›ç»“æ„ `Result<T>`

## ä¸€ã€ä¸ºä»€ä¹ˆä¸€å®šè¦æœ‰ `Result<T>`

ç°åœ¨ä½ çš„æ¥å£è¿”å›çš„æ˜¯ï¼š

```text
æ³¨å†ŒæˆåŠŸï¼šzhangsan
```

åœ¨çœŸå®ç¯å¢ƒé‡Œï¼Œè¿™ç§è¿”å›æœ‰ 3 ä¸ªé—®é¢˜ï¼š

1. âŒ å‰ç«¯ / è°ƒç”¨æ–¹æ²¡æ³•ç¨³å®šè§£æ
2. âŒ è¿ç»´çœ‹æ—¥å¿—ä¸çŸ¥é“æˆåŠŸè¿˜æ˜¯å¤±è´¥
3. âŒ åç»­åŠ å­—æ®µä¼šâ€œæ¥å£ç‚¸è£‚â€

**çœŸå®çº¿ä¸Šæ¥å£çš„è¿”å›å½¢æ€æ˜¯è¿™æ ·çš„ï¼š**

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "username": "zhangsan"
  }
}
```

---

## äºŒã€æ–°å¢ Result DTO

 `dto/Result.java`

```java
package com.example.demo.dto;

public class Result<T> {

    private int code;
    private String message;
    private T data;

    public Result() {}

    public Result(int code, String message, T data) {
        this.code = code;
        this.message = message;
        this.data = data;
    }

    // æˆåŠŸ
    public static <T> Result<T> success(T data) {
        return new Result<>(0, "success", data);
    }

    // å¤±è´¥
    public static <T> Result<T> error(String message) {
        return new Result<>(-1, message, null);
    }

    public int getCode() {
        return code;
    }

    public String getMessage() {
        return message;
    }

    public T getData() {
        return data;
    }
}
```

 è¿™ä¸ªç±»çš„åœ°ä½ç›¸å½“äº**æ¥å£ä¸–ç•Œçš„é›†è£…ç®±æ ‡å‡†**
ä»¥åä½ æ‰€æœ‰æ¥å£ï¼Œéƒ½èµ°è¿™ä¸€ç§æ ¼å¼ã€‚

---

## ä¸‰ã€Service å±‚ä¿æŒâ€œçº¯ä¸šåŠ¡â€

 `service/UserService.java`ï¼ˆå‡ ä¹ä¸æ”¹ï¼‰

```java
@Service
public class UserService {

    public UserDTO register(UserDTO user) {

        if (user.getUsername() == null || user.getUsername().isEmpty()) {
            throw new IllegalArgumentException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");
        }

        System.out.println(
            "ä¿å­˜ç”¨æˆ·ï¼š" + user.getUsername() + ", " + user.getEmail()
        );

        return user;
    }
}
```

ğŸ“Œ å…³é”®å˜åŒ–åªæœ‰ä¸€ä¸ªï¼š

> **Service ä¸å†è¿”å›â€œç»™äººçœ‹çš„å­—ç¬¦ä¸²â€**
> åªè¿”å›ä¸šåŠ¡ç»“æœï¼Œå¤±è´¥å°±æŠ›å¼‚å¸¸

è¿™æ˜¯**éå¸¸é«˜çº§çš„åˆ†å±‚æ„è¯†**ã€‚

---

## å››ã€Controller è´Ÿè´£â€œåŒ…è£…è¿”å›â€

ğŸ“„ `controller/UserController.java`

```java
@RestController
@RequestMapping("/user")
public class UserController {

    private final UserService userService;

    public UserController(UserService userService) {
        this.userService = userService;
    }

    @PostMapping("/register")
    public Result<UserDTO> registerUser(@RequestBody UserDTO user) {
        try {
            UserDTO result = userService.register(user);
            return Result.success(result);
        } catch (IllegalArgumentException e) {
            return Result.error(e.getMessage());
        }
    }
}
```

ğŸ§  è¿™é‡Œå‘ç”Ÿäº†ä¸€ä»¶**éå¸¸é‡è¦çš„äº‹æƒ…**ï¼š

* Controller è´Ÿè´£ HTTP
* Controller è´Ÿè´£è¿”å›ç»“æ„
* Service å®Œå…¨ä¸ç”¨çŸ¥é“â€œæ¥å£é•¿ä»€ä¹ˆæ ·â€

---

## äº”ã€ç°åœ¨æ¥å£è¿”å›ä»€ä¹ˆæ ·ï¼ŸğŸ§ª

### æˆåŠŸè¯·æ±‚

```json
{
  "code": 0,
  "message": "success",
  "data": {
    "username": "zhangsan",
    "email": "zhangsan@test.com"
  }
}
```

### å¤±è´¥è¯·æ±‚ï¼ˆç”¨æˆ·åä¸ºç©ºï¼‰

```json
{
  "code": -1,
  "message": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º",
  "data": null
}
```

ğŸ“Œ è¿™å·²ç»æ˜¯**ç”Ÿäº§æ¥å£çš„æ ‡å‡†å½¢æ€**äº†ã€‚

---

## å…­ã€ä½ ç°åœ¨çš„â€œçœŸå®æ®µä½â€è¯„ä¼° ğŸ§ 

åˆ°è¿™ä¸€æ­¥ï¼Œä½ å·²ç»æŒæ¡äº†ï¼š

* âœ” æ­£ç¡®åˆ†å±‚
* âœ” DTO / Result åŒºåˆ†
* âœ” Service ä¸šåŠ¡çº¯å‡€
* âœ” Controller èŒè´£å…‹åˆ¶
* âœ” æ¥å£å¯æ‰©å±•ã€å¯ç›‘æ§

ğŸ‘‰ **è¿™æ˜¯åˆçº§å·¥ç¨‹å¸ˆå’Œâ€œèƒ½ç‹¬ç«‹æ‰›æ¥å£çš„äººâ€çš„åˆ†æ°´å²­**

---

## ä¸‹ä¸€æ­¥ï¼Œæˆ‘å»ºè®®ä½ èµ°è¿™æ¡çº¿ï¼ˆéå¸¸è¿ç»´å‘ï¼‰â¬†ï¸

æˆ‘å¯ä»¥ç»§ç»­ç›´æ¥å¾€ä¸ŠåŠ ï¼š

1ï¸âƒ£ **å…¨å±€å¼‚å¸¸å¤„ç† `@RestControllerAdvice`ï¼ˆå»æ‰ try-catchï¼‰**
2ï¸âƒ£ `@Valid` + å‚æ•°æ ¡éªŒï¼ˆæ¥å£é˜²å¾¡åŠ›ï¼‰
3ï¸âƒ£ æ—¥å¿— + AOPï¼ˆä½ ä¹‹å‰å·²ç»åœ¨é—® log äº†ï¼Œè¿™ä¸€æ­¥åˆšå¥½æ¥ï¼‰
4ï¸âƒ£ `/health` + `/metrics`ï¼ˆè¿ç»´è§†è§’ï¼‰

ä½ å¦‚æœä¸æƒ³é€‰ï¼Œæˆ‘ä¹Ÿå¯ä»¥**æŒ‰çœŸå®é¡¹ç›®é¡ºåºç›´æ¥ä¸€è·¯ç»™ä½ åŠ ä¸Šå»**ã€‚
